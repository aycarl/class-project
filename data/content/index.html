<html>
<head>

    <title>Class Project Home</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <script>
        var localURL = "projects_info.php?";

        $(document).ready(function(){
            //update projects if logged in otherwise display pubic projects
            displayProjects();
        });

        //SyncAjax function
        function syncAjax(u){
            u = localURL + u;
            var obj=$.ajax( {url:u, async:false} );
            return $.parseJSON(obj.responseText);
        }

        //display public projects
        function displayProjects(){
            console.log("this function was executed!");
            var pd = document.getElementById("openProjects");

            var pdInfo;

            var pData = syncAjax("projects");//JSON.parse(p);

            if (pData.length > 0) {
                pdInfo = '<div id = "openProjects">';
                // console.log("this function was executed again!");

                for (var i = 0; i < pData.length; i++) {
                    pdInfo += '<div>'+pData[i].id+'</div>';
                    pdInfo += '<div>'+pData[i].description+'</div>';
                    // pdInfo += '<div>'+pData[i+1]+'</div>';
                };

                pdInfo += '</div>';
            };

            console.log("this function was executed again!"+pData);

            $("#openProjects").replaceWith(pdInfo);

        }
    </script>

</head>
<body>
    <div class="container-fluid container">
        <div class="row">
            <div class="col-lg-6">
                <a href="#menu-toggle" id="menu-toggle" onclick="displayProjects()">LOGO</a>
            </div>
            <div class="col-lg-6 text-right">
                <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                <input type="text" ng-model="searchItem" placeholder="Search projects">
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="title">
                    <h1>Class Project</h1>
                </div>
            </div>
        </div>
        <div class="row" id="openProjects">
        </div>
    </div>

</body>

</html>
